{% extends "core/base.html" %}

{% block title %}Edit Student & Screening{% endblock %}

{% block content %}
<h2 class="mb-4 fw-bold">Edit Student & Screening</h2>
<form method="POST" class="mb-4">
    {% csrf_token %}

    <!-- Student Details -->
    <div class="card mb-3 shadow-sm">
        <div class="card-header bg-secondary text-white">Student Information</div>
        <div class="card-body">

            <!-- ✅ Add this school dropdown -->
            <div class="mb-3">
                <label for="id_school" class="form-label fw-bold">School</label>
                <select name="school" id="id_school" class="form-select">
                    <option value="">Select School</option>
                    {% for school in schools %}
                        <option value="{{ school.id }}"
                          {% if student_form.instance.school and school.id == student_form.instance.school.id %}
                              selected
                          {% endif %}>
                          {{ school.name }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            {% for field in student_form %}
                <div class="mb-3">
                    {{ field.label_tag }}
                    {{ field }}
                    {% if field.errors %}
                        <div class="text-danger">{{ field.errors }}</div>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    </div>

    <!-- Screening Details -->
    <div class="card mb-3 shadow-sm">
        <div class="card-header bg-primary text-white">Screening Information</div>
        <div class="card-body">
            {% for field in screening_form %}
                <div class="mb-3">
                    {{ field.label_tag }}
                    {{ field }}
                    {% if field.errors %}
                        <div class="text-danger">{{ field.errors }}</div>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    </div>

    <!-- Screening Checklist -->
    <div class="card mb-3 shadow-sm">
        <div class="card-header bg-info text-white">Screening Checklist</div>
        <div class="card-body">
            {% for field in checklist_form %}
                <div class="form-check mb-2">
                    {{ field }}
                    {{ field.label_tag }}
                    {% if field.errors %}
                        <div class="text-danger">{{ field.errors }}</div>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    </div>

    <button type="submit" class="btn btn-success">Save Changes</button>
    <a href="{% url 'screened_students' %}" class="btn btn-secondary ms-2">Cancel</a>
</form>

<!-- ✅ Checkbox styling -->
<style>
  .form-check-input {
    width: 1.4em;
    height: 1.4em;
    border: 2px solid #000 !important; /* black border */
    cursor: pointer;
  }

  .form-check-input:checked {
    background-color: #198754 !important; /* green check color */
    border-color: #145c32 !important;
  }

  .form-check-label {
    font-weight: 500;
    margin-left: 0.5em;
    color: #222;
  }

  .form-check {
    padding: 0.3em 0;
  }
</style>

{% endblock %}
